<!DOCTYPE html>
<html>
<head>
    <!-- <script src="https://cdn.jsdelivr.net/npm/phaser@3.60.0/dist/phaser-arcade-physics.min.js"></script> !-->
    <script src="./phaser.min.js"></script>
    <script src="/socket.io/socket.io.js"></script>

    <title> PiKCEL - Play with Friends! </title>
    <link rel="icon" type="image/x-icon" href="images/favicon.ico">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link rel="stylesheet" type="text/css" href="style.css">

</head>
<body>
    <center>
        
        <div id="game-container", class="cent">
            <div  class = "splash" id = "splsh">

                <!--------- These are what I'm working on -------->
                <div class="splashLeft">
                    <h2>How to play</h2>
                    <div class="splashLeftContent">
                        <div style="padding:10px;">
                            Start by placing pixels to adjacent blank spaces.
                        </div>
                        <img src="images/example1.gif" style="width:125px; height:100px;">
                        <div style="padding:10px;">
                            Block your opponents from expanding their pixels.
                        </div>
                        <img src="images/example2.gif" style="width:125px; height:100px;">
                        <div style="padding:10px;">
                            If your timer runs out, you lose!
                            <br><br>
                            <img src="images/numbers.gif">
                        </div>
                    </div>
                </div>
                <div class="splashTopRight">
                    <h2>Announcements</h2>
                    <div class="splashRightContent" style="overflow:hidden">  <!--<embed style="position: absolute;left: -8px; top: -8px; margin: 0;height:497px;" src="news.html">-->

                        <div style="height: 470px;overflow-y:auto; padding:10px;">
                            <div style="float:left"> Welcome! </div> <div style="float:right"> Feb 22 2024 </div><br>
                            <hr>
                            Hi, and welcome to the PiKCEL Alpha!<br><br> A few things...
                            <ul style="margin:0px; padding-left:12px;">
                              <li>The game is still in very early Alpha, so there may be many (potentially game breaking) bugs. Please report them if you feel inclined.</li>
                              <li>Any features, gameplay or UI changes you think would make a good addition are appreciated!</li>
                              <li>If you're interested in contributing to the development (programming, testing) please send me an email.</li>
                              <li>Currently, game search will only be populated by very rudimentary bots. You will likely win 95% of the time. Please create a private room if you want to play with friends.</li>
                            </ul>
                            <br>
                            That's all!<br>
                            Best, Jay
                        </div>
                    </div>
                </div>


                <div class="splashBottomRight">
                    <h2>About</h2>
                    <div class="splashMidBG" style="padding:10px;">PiKCEL.io is a free online competitive strategy game, currently in Alpha.<br>

                    The game is a project I develop in my free time, and not intented to be monetized. If you find it fun and wish to contribute please consider!<br>
                    <a href="https://www.buymeacoffee.com/pikcel"  target="_blank"><div class="buttonStyle3" style="position: relative; bottom: 10px; right:-144px; width:90px; "> â˜• Buy me a coffee </div></a>
                    <br><br><a href="https://docs.google.com/forms/d/e/1FAIpQLSesaNAamk_tGPDRoL154Aa2-EpHf_yO04YeMVvepQO0Khxhlg/viewform?usp=pp_url" target="_blank"> Submit a bug!</a>  &nbsp&nbsp&nbsp&nbsp <a href = "mailto: pixelcellgame@gmail.com">Send me an email!</a>
                </div>
                </div>
                <!------------------------------------------------>


                <!----------- CONTENTS OF SPLASH PAGE-------------------->
                <div class="splashWindow"> 
                    <h2 style="color:black;">Welcome to PiKCEL.io!</h2>
                    <div class="splashMidBG">
                    <div class="splashContent">
                        
                        <!--https://stackoverflow.com/questions/18022019/how-to-transfer-data-from-an-html-form-to-a-javascript-function-->
                        <input autocomplete="off" class="splashInput" style ="padding-top:10px;" type="text" placeholder="What's your name?" name="pn" id="pn">
                        <div class="buttonContainer" style="width:48.5%; height: 52px; float:left;">
                            
                            
                                <form action="javascript:twoPlayers();" method="get"> <input class="buttonItem" style="background-image: url('images/icons2.png');float: left; width:33.333%; border-right:2px solid #7fcb6e;" type="submit" value="" ></form>
                                <form  action="javascript:threePlayers();" method="get"><input class="buttonItem" style="background-image: url('images/icons3.png');float:left; width:33.333%; border-right:2px solid #7fcb6e;" type="submit" value=""></form>
                                <form action="javascript:fourPlayers();" method="get"><input class="buttonItem" style="background-image: url('images/icons4.png');float:left; width:33.333%;" type="submit" value="" ></form>
                            
                        </div>

                        <form action="javascript:createWaitRoom();" method="get">
                            <input class="buttonStyle1" style="width:48.5%; float:right;" type="submit" value="Create Private Room">
                        </form>
                        <br><br><br>
                        <hr>

                        <form autocomplete="off" action="javascript:joinWaitRoom();" method="get">
                            <input class="splashInput" style="" type="text" placeholder="Room ID" name="customRoomID" id="customRoomID">
                            <input class="buttonStyle2" style="" type="submit" value="Join Existing Room">
                        </form>

                    </div>
                    </div>
                    <div style="position:absolute; bottom:4px; right:4px; font-size:9px;">PiKCEL.io Alpha</div>
                </div>
            </div>

            <!-------------WAITING MENU CONTENT----------------------->
            <div class="waitingWinNames" id="waitingWinNames">
                <div id = "namesToDisplay"></div>
            </div>
            <div class = "plrCount" id = "plrCount">(1/4)</div>
            <div class="waitingWin" id="waitingWindow" >
                <div id ="rmid"> Room ID: 00000 </div>
                <form action="javascript:goToGame();" method="get">
                    <input class="buttonStyle1" type="submit" value="Start">
                </form>

            </div>

            <!-------------CHAT CONTENT FOR GAME---------------------->
            <div class="chatInput" id ="cht">
                <form autocomplete="off" action="javascript:sendMessage();" method="get">
                    <input class="inputText" type="text" name="msg" id="msg" placeholder="Send message"><br>
                </form>
            </div>

            <!--------------GAME CONTENT------------------------------->
            <div class= "gameOver" id="ga">
                <form action="javascript:goBackToWait();" method="get">
                    <input class="buttonStyle1" type="submit" value="Play Again">
                </form>
            </div>
            <div class= "chatWindow" id="cw"><div class="chatContent" id = "cww"></div></div>
        </div>
        
    </center>
    <script type="text/javascript" src="helpees.js"></script>
    <script type="text/javascript" src="src/PlayerBadges.js"></script>

    <!-- Added in commit--->
    <script type="text/javascript" src="src/Pixel.js"></script>
    <script type="text/javascript" src="src/Grid.js"></script>
    <script type="text/javascript" src="src/Game.js"></script>
    <script type="text/javascript" src="src/Menu.js"></script>

    <script type="text/javascript">


    var socket = io();
    var tempx = 0;
    var tempy = 0;
    var playerColor = null;

    var initialized = false;

    var playerColours = new Array(4);
    var playerList = [];
    var ogNames = [];
    var ogColours = [];

    var playerNames = [];

    var playerNum = -1;
    var myTurn = false;
    var whoseTurn = -1;
    var numPlaced = 0;
    var numAllowedToPlace = -1;
    var numLeft = -1;

    var myName = "";

    var shadowOffset = 5;

    var splash = true;

    let bgMod = 1024;

    const msgWin = document.getElementById('cww');

    var roomID = '-1-1-1-1-1';

    

 
    var pbs = new PlayerBadges(0,0);

    var board = new Array(16);
    for (let i = 0; i < 16; i++){
        board[i] = new Array(16);
    }
    for(let i = 0; i < 16; i++){
        for(let j = 0; j < 16; j++){
            board[i][j] = '0x111111';
        }
    }


    function checkAdj(x,y){
        //Need to check if it's one of the two default colours first.
        if(board[x][y] == '0xEFEFEF' || board[x][y] == '0xFFFFFF'){
            //Now we can draw, if we are adjacent to one of the playerColor tiles
            if(x > 0 && board[x-1][y] == playerColor)
                return true;
            if(x < 15 && board[x+1][y] == playerColor)
                return true;
            if(y > 0 && board[x][y-1] == playerColor)
                return true;
            if(y < 15 && board[x][y+1] == playerColor)
                return true;
        }
        return false;
    }

    


    var pixStore = new Array(16);
    for (let i = 0; i < 16; i++){
        pixStore[i] = new Array(16);
    }
    for(let i = 0; i < 16; i++){
        for(let j = 0; j < 16; j++){
            const pixel = new Pixel(0,0,0,0,0);
            pixStore[i][j] = pixel;
        }
    }



   

    let container = document.querySelector("body");
    var bgX = 0;
    var bgY = 0;
    var gameScene = null;
    


    var menuScene = null;
    var frame = 0;
    

    var config = {
        //type: Phaser.AUTO,
        type: Phaser.WEBGL,
        width: 1200,
        height: 800,
        parent: 'game-container',
        backgroundColor: '#562D6E',
        transparent: true,
        resolution: window.devicePixelRatio,
        scale: Phaser.Scale.Center,
        pixelArt: true,
        antialias: false,
        scene: [Menu, Game]
    };

    var game = new Phaser.Game(config);


    </script>
    <script type="text/javascript" src="net.js"></script>
    <center>
    
</center>
</body>


</html>